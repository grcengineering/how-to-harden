# AUTO-GENERATED by scripts/sync-packs-to-data.sh â€” do not edit manually
# Generated: 2026-02-20T08:35:28Z

"1.1":
  api:
    lang: "bash"
    filename: "hth-workato-1.01-verify-sso-status.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-1.01-verify-sso-status.sh"
    excerpts:
      api-verify-sso-status:
        content: |
            # List all workspace members and check their authentication method
            curl -s "https://www.workato.com/api/managed_users" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json" | \
            jq '.result[] | {id: .id, email: .email, name: .name}'

"1.5":
  api:
    lang: "bash"
    filename: "hth-workato-1.05-manage-users.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-1.05-manage-users.sh"
    excerpts:
      api-list-users:
        content: |
            # List all managed users
            curl -s "https://www.workato.com/api/managed_users" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, email, external_id}'
      api-add-user:
        content: |
            # Add a managed user
            curl -s -X POST "https://www.workato.com/api/managed_users" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json" \
            -d '{
              "name": "Jane Doe",
              "email": "jane.doe@company.com",
              "external_id": "ext-12345",
              "role_name": "Analyst"
            }'
      api-delete-user:
        content: |
            # Delete a managed user (deprovision)
            curl -s -X DELETE "https://www.workato.com/api/managed_users/USER_ID" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN"

"2.1":
  api:
    lang: "bash"
    filename: "hth-workato-2.01-manage-roles.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-2.01-manage-roles.sh"
    excerpts:
      api-list-roles:
        content: |
            # List all custom roles in the workspace
            curl -s "https://www.workato.com/api/roles" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, description}'
      api-get-role:
        content: |
            # Get details of a specific role
            curl -s "https://www.workato.com/api/roles/ROLE_ID" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.'
      api-create-role:
        content: |
            # Create a custom role with specific permissions
            curl -s -X POST "https://www.workato.com/api/roles" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json" \
            -d '{
              "name": "Recipe Developer",
              "description": "Can build and test recipes but not deploy to production"
            }'

"2.4":
  api:
    lang: "bash"
    filename: "hth-workato-2.04-create-custom-roles.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-2.04-create-custom-roles.sh"
    excerpts:
      api-create-custom-role:
        content: |
            # Create a custom role with specific permissions
            curl -s -X POST "https://www.workato.com/api/roles" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json" \
            -d '{
              "name": "Deployment Approver",
              "description": "Can approve and execute deployments to production environments only"
            }'

"2.5":
  api:
    lang: "bash"
    filename: "hth-workato-2.05-audit-admin-access.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-2.05-audit-admin-access.sh"
    excerpts:
      api-audit-admins:
        content: |
            # List all workspace collaborators and filter for admins
            curl -s "https://www.workato.com/api/managed_users" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '[.result[] | select(.role_name == "Admin")] |
              "Admin count: \(length)", .[] | {id, name, email}'

"2.6":
  api:
    lang: "bash"
    filename: "hth-workato-2.06-access-review-report.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-2.06-access-review-report.sh"
    excerpts:
      api-export-access-review:
        content: |
            # Export all collaborators with roles for access review
            curl -s "https://www.workato.com/api/managed_users" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq -r '["Name","Email","Role","External ID"],
              (.result[] | [.name, .email, .role_name, .external_id]) |
              @csv' > workato_access_review_$(date +%Y%m%d).csv
          
            echo "Access review export complete. Review and verify each entry."

"3.1":
  terraform:
    lang: "hcl"
    filename: "hth-workato-3.01-configure-ekm.tf"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/terraform/hth-workato-3.01-configure-ekm.tf"
    excerpts:
      terraform-kms-key:
        content: |
            resource "aws_kms_key" "workato_ekm" {
            description             = "Workato EKM - Workspace encryption key"
            deletion_window_in_days = 30
            enable_key_rotation     = true
            key_usage               = "ENCRYPT_DECRYPT"
          
            policy = jsonencode({
              Version = "2012-10-17"
              Statement = [
                {
                  Sid    = "AllowKeyAdmin"
                  Effect = "Allow"
                  Principal = {
                    AWS = "arn:aws:iam::YOUR_ACCOUNT_ID:root"
                  }
                  Action   = "kms:*"
                  Resource = "*"
                },
                {
                  Sid    = "AllowWorkatoAccess"
                  Effect = "Allow"
                  Principal = {
                    AWS = "arn:aws:iam::WORKATO_ACCOUNT_ID:root"
                  }
                  Action = [
                    "kms:Encrypt",
                    "kms:Decrypt",
                    "kms:GenerateDataKey",
                    "kms:DescribeKey"
                  ]
                  Resource = "*"
                }
              ]
            })
          
            tags = {
              Application = "Workato"
              Purpose     = "EKM-BYOK"
            }
            }
          
            resource "aws_kms_alias" "workato_ekm" {
            name          = "alias/workato-ekm"
            target_key_id = aws_kms_key.workato_ekm.key_id
            }
  api:
    lang: "bash"
    filename: "hth-workato-3.01-configure-ekm.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-3.01-configure-ekm.sh"
    excerpts:
      api-create-kms-key:
        content: |
            # Create a KMS key for Workato EKM
            aws kms create-key \
            --description "Workato EKM - Workspace encryption key" \
            --key-usage ENCRYPT_DECRYPT \
            --origin AWS_KMS \
            --tags TagKey=Application,TagValue=Workato TagKey=Environment,TagValue=Production
          
            # Enable automatic key rotation
            aws kms enable-key-rotation --key-id KEY_ID
          
            # Verify key rotation is enabled
            aws kms get-key-rotation-status --key-id KEY_ID

"3.4":
  api:
    lang: "bash"
    filename: "hth-workato-3.04-manage-properties.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-3.04-manage-properties.sh"
    excerpts:
      api-list-properties:
        content: |
            # List all environment properties
            curl -s "https://www.workato.com/api/properties" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {name, sensitive}'
      api-create-sensitive-property:
        content: |
            # Create or update a sensitive property
            curl -s -X POST "https://www.workato.com/api/properties" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json" \
            -d '{
              "name": "API_SECRET_KEY",
              "value": "sk-abc123...",
              "sensitive": true
            }'

"4.1":
  api:
    lang: "bash"
    filename: "hth-workato-4.01-audit-connections.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-4.01-audit-connections.sh"
    excerpts:
      api-list-connections:
        content: |
            # List all connections with their status
            curl -s "https://www.workato.com/api/connections" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, provider, connected: .authorized}'
      api-list-folder-connections:
        content: |
            # List connections in a specific folder/project
            curl -s "https://www.workato.com/api/connections?folder_id=FOLDER_ID" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, provider}'

"4.3":
  cli:
    lang: "bash"
    filename: "hth-workato-4.03-deploy-opa.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/cli/hth-workato-4.03-deploy-opa.sh"
    excerpts:
      cli-docker-deploy-opa:
        content: |
            # Pull the Workato OPA Docker image
            # See: https://docs.workato.com/on-prem/agents/docker.html
            docker pull daa34553.workato.com/semi-public/amd64/workato-agent:latest
          
            # Run the agent with configuration
            docker run -d \
            --name workato-opa \
            --restart unless-stopped \
            -v /opt/workato/conf:/opt/workato/conf:ro \
            -v /opt/workato/data:/opt/workato/data \
            daa34553.workato.com/semi-public/amd64/workato-agent:latest
          
            # Verify agent is running and connected
            docker logs workato-opa | grep -i "connected"

"5.1":
  api:
    lang: "bash"
    filename: "hth-workato-5.01-manage-api-clients.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-5.01-manage-api-clients.sh"
    excerpts:
      api-list-clients:
        content: |
            # List all API clients
            curl -s "https://www.workato.com/api/api_clients" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, created_at}'
      api-create-client:
        content: |
            # Create a new API client
            curl -s -X POST "https://www.workato.com/api/api_clients" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json" \
            -d '{
              "name": "partner-system-prod",
              "description": "Production API access for Partner System"
            }'
      api-list-access-profiles:
        content: |
            # List API access profiles
            curl -s "https://www.workato.com/api/api_access_profiles" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, api_client_id, api_collection_ids}'

"6.1":
  terraform:
    lang: "hcl"
    filename: "hth-workato-6.01-configure-secrets-manager.tf"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/terraform/hth-workato-6.01-configure-secrets-manager.tf"
    excerpts:
      terraform-secrets-manager:
        content: |
            resource "aws_secretsmanager_secret" "workato_salesforce" {
            name        = "workato/connections/salesforce-prod"
            description = "Workato Salesforce production connection credentials"
          
            tags = {
              Application = "Workato"
              Connection  = "Salesforce"
              Environment = "Production"
            }
            }
          
            resource "aws_secretsmanager_secret_rotation" "workato_salesforce" {
            secret_id           = aws_secretsmanager_secret.workato_salesforce.id
            rotation_lambda_arn = aws_lambda_function.secret_rotation.arn
          
            rotation_rules {
              automatically_after_days = 90
            }
            }
  api:
    lang: "bash"
    filename: "hth-workato-6.01-configure-secrets-manager.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-6.01-configure-secrets-manager.sh"
    excerpts:
      api-store-secret:
        content: |
            # Store a connection credential in AWS Secrets Manager
            aws secretsmanager create-secret \
            --name "workato/connections/salesforce-prod" \
            --description "Workato Salesforce production connection credentials" \
            --secret-string '{
              "client_id": "3MVG9...",
              "client_secret": "...",
              "refresh_token": "..."
            }' \
            --tags Key=Application,Value=Workato Key=Connection,Value=Salesforce
          
            # Enable automatic rotation (90-day cycle)
            aws secretsmanager rotate-secret \
            --secret-id "workato/connections/salesforce-prod" \
            --rotation-rules AutomaticallyAfterDays=90

"7.2":
  api:
    lang: "bash"
    filename: "hth-workato-7.02-manage-deployments.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-7.02-manage-deployments.sh"
    excerpts:
      api-list-deployments:
        content: |
            # List deployment packages
            curl -s "https://www.workato.com/api/deployments" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, state, created_at}'
      api-export-package:
        content: |
            # Create a deployment package
            curl -s -X POST "https://www.workato.com/api/packages/export/MANIFEST_ID" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/json"
      api-import-package:
        content: |
            # Import a package into target environment
            curl -s -X POST "https://www.workato.com/api/packages/import/FOLDER_ID" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" \
            -H "Content-Type: application/octet-stream" \
            --data-binary @package.zip

"7.3":
  api:
    lang: "bash"
    filename: "hth-workato-7.03-manage-recipes.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-7.03-manage-recipes.sh"
    excerpts:
      api-list-recipes:
        content: |
            # List all recipes in a project folder
            curl -s "https://www.workato.com/api/recipes?folder_id=FOLDER_ID" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, name, running, version}'
      api-stop-recipe:
        content: |
            # Stop a recipe before deployment
            curl -s -X PUT "https://www.workato.com/api/recipes/RECIPE_ID/stop" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN"
      api-start-recipe:
        content: |
            # Start a recipe after deployment
            curl -s -X PUT "https://www.workato.com/api/recipes/RECIPE_ID/start" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN"
      api-recipe-versions:
        content: |
            # Get recipe versions (audit trail)
            curl -s "https://www.workato.com/api/recipes/RECIPE_ID/versions" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {version, created_at, comment}'
  cli:
    lang: "bash"
    filename: "hth-workato-7.03-workato-cli.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/cli/hth-workato-7.03-workato-cli.sh"
    excerpts:
      cli-github-actions-pipeline:
        content: |
            # .github/workflows/workato-deploy.yml
            # ---
            # name: Workato Recipe Deployment
            # on:
            #   push:
            #     branches: [main]
            #     paths: ['workato/**']
            #
            # jobs:
            #   validate:
            #     runs-on: ubuntu-latest
            #     steps:
            #       - uses: actions/checkout@v4
            #       - name: Validate recipe package
            #         run: |
            #           curl -sf "https://www.workato.com/api/packages/export/$MANIFEST_ID" \
            #             -H "Authorization: Bearer $WORKATO_DEV_TOKEN" -o package.zip
            #           test -s package.zip || exit 1
            #
            #   deploy:
            #     needs: validate
            #     runs-on: ubuntu-latest
            #     environment: production
            #     steps:
            #       - uses: actions/checkout@v4
            #       - name: Export package from DEV
            #         run: |
            #           curl -sf -X POST \
            #             "https://www.workato.com/api/packages/export/$MANIFEST_ID" \
            #             -H "Authorization: Bearer $WORKATO_DEV_TOKEN" -o package.zip
            #       - name: Import package to PROD
            #         run: |
            #           curl -sf -X POST \
            #             "https://www.workato.com/api/packages/import/$PROD_FOLDER_ID" \
            #             -H "Authorization: Bearer $WORKATO_PROD_TOKEN" \
            #             -H "Content-Type: application/octet-stream" \
            #             --data-binary @package.zip
            #       - name: Verify deployment
            #         run: |
            #           curl -sf "https://www.workato.com/api/recipes?folder_id=$PROD_FOLDER_ID" \
            #             -H "Authorization: Bearer $WORKATO_PROD_TOKEN" | \
            #             jq '.result[] | {name, running, updated_at}'
      cli-workato-connector-dev:
        content: |
            # Install Workato Connector SDK (Ruby gem)
            gem install workato-connector-sdk
          
            # Generate a new connector scaffold
            workato generate connector my-connector
          
            # Validate connector code locally
            workato exec actions.my_action \
            --connector my-connector \
            --input '{"key": "value"}'
          
            # Run connector test suite
            workato generate test --connector my-connector
            workato exec triggers.my_trigger --connector my-connector
          
            # Push validated connector to Workato workspace
            workato push --connector my-connector --token $WORKATO_API_TOKEN

"8.1":
  api:
    lang: "bash"
    filename: "hth-workato-8.01-query-audit-logs.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-8.01-query-audit-logs.sh"
    excerpts:
      api-get-audit-logs:
        content: |
            # Retrieve recent audit log events
            curl -s "https://www.workato.com/api/activity_logs?page=1&per_page=100" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {
              timestamp: .created_at,
              user: .user_name,
              event: .event_type,
              resource: .resource_type,
              details: .details
            }'
      api-filter-admin-actions:
        content: |
            # Filter for admin actions only
            curl -s "https://www.workato.com/api/activity_logs?event_type=admin_action" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {timestamp: .created_at, user: .user_name, details: .details}'
      api-export-audit-logs:
        content: |
            # Export audit logs for compliance archive
            curl -s "https://www.workato.com/api/activity_logs?page=1&per_page=500" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result' > audit_log_$(date +%Y%m%d).json

"8.3":
  api:
    lang: "bash"
    filename: "hth-workato-8.03-check-recipe-errors.sh"
    source_url: "https://github.com/grcengineering/how-to-harden/blob/main/packs/workato/api/hth-workato-8.03-check-recipe-errors.sh"
    excerpts:
      api-list-active-recipes:
        content: |
            # List recipes with recent errors
            curl -s "https://www.workato.com/api/recipes?active=true" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | select(.last_run_at != null) | {
              id, name,
              last_run: .last_run_at,
              running: .running
            }'
      api-get-failed-jobs:
        content: |
            # Get recent job history for a specific recipe
            curl -s "https://www.workato.com/api/recipes/RECIPE_ID/jobs?status=failed" \
            -H "Authorization: Bearer $WORKATO_API_TOKEN" | \
            jq '.result[] | {id, started_at, completed_at, error}'

