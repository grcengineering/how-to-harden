---
layout: default
title: Home
---

{% assign pack_count = 0 %}
{% for guide in site.guides %}
  {% assign pd = site.data.packs[guide.slug] %}
  {% if pd %}{% assign pack_count = pack_count | plus: 1 %}{% endif %}
{% endfor %}

<section class="hero">
  <div class="container">
    <h1>How to Harden</h1>
    <p class="tagline">Open-source SaaS security hardening guides for supply chain defense. Protect your organization from third-party breaches.</p>

    <div class="search-box">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <input type="text" id="search" placeholder="Search guides (e.g., Okta, Snowflake, GitLab...)">
    </div>

    <div class="hero-stats">
      <div class="stat">
        <div class="stat-value">{{ site.guides.size }}</div>
        <div class="stat-label">Hardening Guides</div>
      </div>
      <div class="stat">
        <div class="stat-value">7</div>
        <div class="stat-label">SaaS Categories</div>
      </div>
      <div class="stat">
        <div class="stat-value">{{ pack_count }}</div>
        <div class="stat-label">Code Packs</div>
      </div>
    </div>
  </div>
</section>

<section class="guides-section" id="guides">
  <div class="container">
    <div class="section-header">
      <h2>Hardening Guides</h2>
    </div>

    <div class="guides-toolbar">
      <div class="toolbar-row">
        <div class="category-filters">
          <button class="category-filter active" data-category="all">All</button>
          <button class="category-filter" data-category="identity">Identity</button>
          <button class="category-filter" data-category="security">Security</button>
          <button class="category-filter" data-category="devops">DevOps</button>
          <button class="category-filter" data-category="data">Data</button>
          <button class="category-filter" data-category="productivity">Productivity</button>
          <button class="category-filter" data-category="hr">HR/Finance</button>
          <button class="category-filter" data-category="marketing">Marketing</button>
        </div>
        <div class="toolbar-actions">
          <div class="filter-group">
            <button class="filter-chip active" data-review="all">All Status</button>
            <button class="filter-chip" data-review="ai-drafted">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path></svg>
              Drafted
            </button>
            <button class="filter-chip" data-review="human-reviewed">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
              Reviewed
            </button>
            <button class="filter-chip" data-review="human-verified">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
              Verified
            </button>
          </div>
          <span class="toolbar-divider"></span>
          <button class="filter-chip pack-chip" data-pack="all">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
            Code Packs
          </button>
          <span class="toolbar-divider"></span>
          <select id="sort-select" class="toolbar-select" aria-label="Sort guides">
            <option value="default">Default</option>
            <option value="az">A &rarr; Z</option>
            <option value="za">Z &rarr; A</option>
          </select>
          <div class="view-toggle">
            <button class="view-btn active" data-view="card" aria-label="Card view">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
              </svg>
            </button>
            <button class="view-btn" data-view="list" aria-label="List view">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                <line x1="3" y1="18" x2="3.01" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="guides-grid" id="guides-grid">
      {% for guide in site.guides %}
      {% assign cat = guide.category | downcase %}
      {% if cat contains "identity" or cat contains "iam" or cat contains "iga" %}
        {% assign data_cat = "identity" %}
        {% assign cat_label = "Identity" %}
      {% elsif cat contains "security" or cat contains "pam" or cat contains "secrets" %}
        {% assign data_cat = "security" %}
        {% assign cat_label = "Security" %}
      {% elsif cat contains "devops" or cat contains "ci/cd" or cat contains "iac" or cat contains "container" or cat contains "hosting" or cat contains "developer" %}
        {% assign data_cat = "devops" %}
        {% assign cat_label = "DevOps" %}
      {% elsif cat contains "data" or cat contains "analytics" or cat contains "observability" or cat contains "storage" %}
        {% assign data_cat = "data" %}
        {% assign cat_label = "Data" %}
      {% elsif cat contains "collaboration" or cat contains "productivity" or cat contains "itsm" or cat contains "support" or cat contains "communication" or cat contains "business" or cat contains "erp" or cat contains "automation" %}
        {% assign data_cat = "productivity" %}
        {% assign cat_label = "Productivity" %}
      {% elsif cat contains "hr" or cat contains "payroll" or cat contains "finance" %}
        {% assign data_cat = "hr" %}
        {% assign cat_label = "HR/Finance" %}
      {% elsif cat contains "marketing" or cat contains "crm" or cat contains "ai" %}
        {% assign data_cat = "marketing" %}
        {% assign cat_label = "Marketing" %}
      {% else %}
        {% assign data_cat = "security" %}
        {% assign cat_label = "Security" %}
      {% endif %}
      {% if guide.maturity == "human-reviewed" %}
        {% assign review_status = "human-reviewed" %}
        {% assign status_class = "status-reviewed" %}
        {% assign status_label = "Reviewed" %}
      {% elsif guide.maturity == "human-verified" %}
        {% assign review_status = "human-verified" %}
        {% assign status_class = "status-verified" %}
        {% assign status_label = "Verified" %}
      {% else %}
        {% assign review_status = "ai-drafted" %}
        {% assign status_class = "status-draft" %}
        {% assign status_label = "AI Drafted" %}
      {% endif %}
      {% assign has_pack = false %}
      {% assign pack_data = site.data.packs[guide.slug] %}
      {% if pack_data %}{% assign has_pack = true %}{% endif %}
      <div class="guide-card" data-category="{{ data_cat }}" data-name="{{ guide.slug }}" data-reviewed="{{ review_status }}" data-has-pack="{{ has_pack }}">
        <div class="guide-card-header">
          <h3><a href="{{ guide.url | relative_url }}">{{ guide.vendor }}</a></h3>
          <span class="status-badge {{ status_class }}">
            {% if review_status == "ai-drafted" %}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
              <line x1="12" y1="9" x2="12" y2="13"></line>
              <circle cx="12" cy="17" r="1" fill="currentColor"></circle>
            </svg>
            {% elsif review_status == "human-reviewed" %}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            {% else %}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            {% endif %}
            {{ status_label }}
          </span>
        </div>
        <p class="guide-card-description">{{ guide.description }}</p>
        <div class="guide-card-meta">
          <span class="category-tag category-{{ data_cat }}">{{ cat_label }}</span>
          {% if has_pack %}
          <span class="pack-badge">
            <span class="pack-badge-text">&lt;/&gt; Code Pack</span>
          </span>
          {% endif %}
        </div>
      </div>
      {% endfor %}

    </div>
  </div>
</section>

<script>
// Filter, sort, and view functionality
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search');
  const categoryFilters = document.querySelectorAll('.category-filter');
  const sortSelect = document.getElementById('sort-select');
  const reviewChips = document.querySelectorAll('.filter-chip[data-review]');
  const packChip = document.querySelector('.pack-chip');
  const viewButtons = document.querySelectorAll('.view-btn');
  const guidesGrid = document.getElementById('guides-grid');
  const guideCards = document.querySelectorAll('.guide-card');

  // Store original order for default sorting
  const originalOrder = Array.from(guideCards);

  // Get active review filter
  function getActiveReviewFilter() {
    const activeBtn = document.querySelector('.filter-chip[data-review].active');
    return activeBtn ? activeBtn.dataset.review : 'all';
  }

  // Get active pack filter
  function getActivePackFilter() {
    return packChip && packChip.classList.contains('active') ? 'has-pack' : 'all';
  }

  function filterGuides() {
    const searchTerm = searchInput.value.toLowerCase();
    const activeCategory = document.querySelector('.category-filter.active').dataset.category;
    const reviewFilter = getActiveReviewFilter();
    const packFilter = getActivePackFilter();

    guideCards.forEach(card => {
      const name = card.dataset.name.toLowerCase();
      const category = card.dataset.category;
      const reviewed = card.dataset.reviewed;
      const hasPack = card.dataset.hasPack;
      const title = card.querySelector('h3').textContent.toLowerCase();
      const desc = card.querySelector('.guide-card-description').textContent.toLowerCase();

      const matchesSearch = !searchTerm || name.includes(searchTerm) || title.includes(searchTerm) || desc.includes(searchTerm);
      const matchesCategory = activeCategory === 'all' || category === activeCategory;
      const matchesReview = reviewFilter === 'all' || reviewed === reviewFilter;
      const matchesPack = packFilter === 'all' || hasPack === 'true';

      card.style.display = matchesSearch && matchesCategory && matchesReview && matchesPack ? '' : 'none';
    });
  }

  function sortGuides() {
    const sortValue = sortSelect.value;
    const cardsArray = Array.from(guideCards);

    if (sortValue === 'default') {
      // Restore original order
      originalOrder.forEach(card => guidesGrid.appendChild(card));
    } else {
      cardsArray.sort((a, b) => {
        const nameA = a.querySelector('h3').textContent.toLowerCase();
        const nameB = b.querySelector('h3').textContent.toLowerCase();
        if (sortValue === 'az') {
          return nameA.localeCompare(nameB);
        } else {
          return nameB.localeCompare(nameA);
        }
      });
      cardsArray.forEach(card => guidesGrid.appendChild(card));
    }
    filterGuides();
  }

  function setView(view) {
    if (view === 'list') {
      guidesGrid.classList.add('list-view');
    } else {
      guidesGrid.classList.remove('list-view');
    }
  }

  searchInput.addEventListener('input', filterGuides);

  categoryFilters.forEach(filter => {
    filter.addEventListener('click', function() {
      categoryFilters.forEach(f => f.classList.remove('active'));
      this.classList.add('active');
      filterGuides();
    });
  });

  sortSelect.addEventListener('change', sortGuides);

  // Review filter chip click handlers
  reviewChips.forEach(btn => {
    btn.addEventListener('click', function() {
      reviewChips.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      filterGuides();
    });
  });

  // Pack filter toggle (single button, toggles on/off)
  if (packChip) {
    packChip.addEventListener('click', function() {
      this.classList.toggle('active');
      filterGuides();
    });
  }

  viewButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      viewButtons.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      setView(this.dataset.view);
    });
  });

  // Make entire guide card clickable
  guideCards.forEach(card => {
    card.addEventListener('click', function(e) {
      // Don't trigger if clicking on the link itself (let it handle naturally)
      if (e.target.tagName === 'A' || e.target.closest('a')) {
        return;
      }

      // Find the link within this card and navigate to it
      const link = this.querySelector('h3 a');
      if (link) {
        link.click();
      }
    });
  });
});
</script>
