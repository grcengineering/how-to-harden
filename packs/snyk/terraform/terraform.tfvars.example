# =============================================================================
# Snyk Hardening Code Pack - Example Variable Values
# How to Harden (howtoharden.com)
#
# Copy this file to terraform.tfvars and fill in your values.
# NEVER commit terraform.tfvars to version control -- it contains secrets.
#
# Usage:
#   cp terraform.tfvars.example terraform.tfvars
#   # Edit terraform.tfvars with your values
#   terraform plan
#   terraform apply
# =============================================================================


# -----------------------------------------------------------------------------
# Profile Level
# 1 = Baseline (L1) -- essential controls for all organizations
# 2 = Hardened (L2) -- adds ignore policies, stricter governance
# 3 = Maximum Security (L3) -- strictest controls for regulated industries
# -----------------------------------------------------------------------------
profile_level = 1


# -----------------------------------------------------------------------------
# Snyk Provider Configuration
# -----------------------------------------------------------------------------

# Snyk API token -- generate at Settings > General > Auth Token
# For CI/CD, use a service account token instead of a personal token.
# WARNING: This is a sensitive value. Use environment variables in production:
#   export TF_VAR_snyk_api_token="snyk-token-..."
snyk_api_token = ""

# Snyk organization ID -- find at Settings > General > Organization ID
snyk_org_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

# Snyk group ID (Enterprise only) -- find at Group Settings > General
# Leave empty if not using group-level features
snyk_group_id = ""


# -----------------------------------------------------------------------------
# Section 1.1: SSO with MFA
# Requires Business or Enterprise plan. Configure SAML IdP in the Snyk
# web console first, then set this to true to enforce SSO for all users.
# -----------------------------------------------------------------------------
sso_enabled = true


# -----------------------------------------------------------------------------
# Section 1.2: Role-Based Access
# Map user emails to their intended Snyk roles.
# Roles: org-admin, org-collaborator, org-custom (Enterprise)
# Leave empty to skip role enforcement (manage via SCIM/SSO instead).
# -----------------------------------------------------------------------------
restricted_roles = {
  # "admin@company.com"     = "org-admin"
  # "developer@company.com" = "org-collaborator"
}


# -----------------------------------------------------------------------------
# Section 2.1: Service Account Tokens
# Create dedicated service accounts for CI/CD pipelines.
# Each pipeline should have its own scoped service account.
# Leave empty to skip service account creation.
# -----------------------------------------------------------------------------
service_accounts = [
  # { name = "ci-scanner-main", role = "org-collaborator" },
  # { name = "ci-scanner-staging", role = "org-collaborator" },
]


# -----------------------------------------------------------------------------
# Section 2.2: SCM Integration Security
# Supported types: github, gitlab, bitbucket-cloud, azure-repos
# -----------------------------------------------------------------------------
scm_integration_type = "github"

# Enable Snyk Broker for private repository scanning (Enterprise)
broker_enabled = false
broker_token   = ""


# -----------------------------------------------------------------------------
# Section 3.1: Project Visibility
# Default visibility for new projects: org-public or org-private
# Recommendation: org-private to restrict vulnerability data access
# -----------------------------------------------------------------------------
default_project_visibility = "org-private"


# -----------------------------------------------------------------------------
# Section 3.2: Ignore Policy (L2+ only)
# Governance settings for vulnerability ignores.
# Only applied when profile_level >= 2.
# -----------------------------------------------------------------------------
ignore_expiration_days = 90
require_ignore_reason  = true


# -----------------------------------------------------------------------------
# Section 4.1: Notification Settings
# Email addresses and alert preferences for security notifications.
# -----------------------------------------------------------------------------
notification_emails = [
  # "security-team@company.com",
]

new_issues_notification = true
weekly_report_enabled   = true
